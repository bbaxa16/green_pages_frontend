<!DOCTYPE html>
<html ng-app='green-pages'>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- style -->

  <!---glyphicons-->
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

  <!--bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

  <!--CSS file-->
  <link rel="stylesheet" href="./css/main.css">

  <!-- script -->
  <script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://use.fontawesome.com/af5dc9ce4b.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular.min.js" charset="utf-8"></script>
  <script src="./js/dom.js" charset="utf-8"></script>
  <script src="./js/app.js" charset="utf-8"></script>
  <title>green pages</title>
  <link rel='icon' href='./css/assets/gplogog.png'>
</head>
  <body ng-controller="userController as user">
    <!-- navbar -->
    <nav class="navbar navbar-inverse navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="site-nav">
          <a href="#" class="navbar-brand img-responsive" ng-click="user.phoneHome()"><img class="logo" src="./css/assets/greenpages2.png"/></a>

          <ul class="nav navbar-right">
            <li class="nav-btn" ng-hide='user.logged'ng-click="user.toggleLogin()">login</li>
            <li class="nav-btn" ng-hide='user.logged' ng-click="user.toggleRegister()">register</li>
            <li class="nav-btn" ng-show="user.logged"  ng-click='user.toggleUser(); user.setUser(user.id)'>
              <i class="fa fa-user-o" aria-hidden="true"></i>
            </li>
            <li class="nav-btn" ng-show="user.logged" ng-click="user.logout()">logout</li>
          </ul>
        </div>
      </div>
    </nav>
    <!--Login Modal -->
    <div id='loginmodal' ng-if='user.loginDisplay'>
      <div class='modal-dialog' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <!-- Close Button -->
              <span class="text-top"><button class='btn btn-default' id='closebtn' ng-click='user.toggleLogin()'>X</button></span>
              <div class='modal-body'>
                <div class="container text-center" ng-if="user.loginDisplay">
                  <form ng-submit="user.login(userJWT)">
                    <input type="text" ng-model="userJWT.username" placeholder="username"></br>
                    <input type="password" ng-model="userJWT.password" placeholder="password"><br/>
                    <button class="btn btn-primary" type="submit" name="button">Login</button>
                  </form>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Register Modal -->
    <div id='registermodal' ng-if='user.registerDisplay'>
      <div class='modal-dialog' role='document'>
        <div class='modal-content'>
          <div class='modal-header'>
            <!-- Close Button -->
              <span class="text-top"><button class='btn btn-default' id='closebtn' ng-click='user.toggleRegister()'>X</button></span>
              <div class='modal-body'>
                <div class="container text-center">
                  <form ng-submit="user.register(userRegister)">
                    <input type="text" ng-model="userRegister.username" placeholder="username">
                    <input type="password" ng-model="userRegister.password" placeholder="password">
                    <!-- not sure exactly how to run the confirm password thing -->
                    <!-- <input type="password" ng-model="userRegister.password" placeholder="confirm password"><br/> -->
                    <button class="btn btn-primary" type="submit">Register</button>
                  </form>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- determines show page for landing -->
    <section ng-if="user.userDisplay === false;">
      <!-- header -->
      <!-- <header ng-controller="slideController as slide" ng-style="{'background-image': user.slide}">

      </header> -->
    <!--Divs with all the strains-->
  <section ng-controller='strainController as strain' class="strains">
    <div ng-click="strain.getCurrentStrain(w.id); user.setUser(user.id)" ng-repeat='w in strain.weed' class="eachStrain thumbnail">
      <img src="{{w.img}}" class="strainImg"/>
      <div ng-if="!user.logged"><br/></div>
      <form ng-if="user.logged" ng-submit="strain.addToFavorites(user.id, strain.currentStrain.id)">
        <button type="submit" class="btn btn-lg">
          <span class="glyphicon glyphicon-heart" aria-hidden="true">
          </span>
        </button>
      </form>
      {{w.name}}
        <br/>
      {{w.group}}
      <!-- <div ng-click="strain.favorite()">[favorite this]</div> -->
    </div>
  </section>

  <div ng-click="user.getFavorites()">CLICK ME FOR LEDGERS</div>
  </section> <!-- end of landing page -->
      <!-- <section ng-include="'./forms.html'"></section> -->
  <section ng-include="'./user.html'" ng-if="user.userDisplay"></section>
  </body>
  <footer class="footer">
    <div class="container">
      <p>Made with &hearts; by Brooke Baxa and James Joo</p>
    </div>
  </footer>
</html>
